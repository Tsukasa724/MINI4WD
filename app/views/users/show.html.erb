<div class="container shadow-lg p-3 mb-5 bg-primary-subtle rounded">
  <div class="container shadow-lg p-3 bg-primary-subtle rounded">
    <div class="row bg-primary mb-4 border border-info rounded">
      <div class="d-md-flex flex-row">
        <% if @user.avatar? %>
          <%= image_tag @user.avatar.url, size: "75x75", class:'icon mt-2' %>
        <% else %>
          <%= image_tag ("/assets/デフォルト画像/Noimage-0d0fe1307bbfe3fa780c9399bdf4bf0e070098b0bb718e4a35209490896f3b77.png"), size: "75x75", class:'icon mt-2' %>
        <% end %>
      </div>
      <p class="h2 text-start text-light"><%= current_user.name %></p>
      <% if current_user.introduction.present? %>
        <p class="text-start text-light"><%= current_user.introduction %></p>
      <% end %>
    </div>
    <div class="container col-12 col-md-11 mb-5">
      <div class="card mb-3 col">
        <div class="row g-0">
          <div class="col-md-6">
            <div class="card">
                <% if @machines.present? %>
                  <% @machines.each do |machine| %>
                    <% if machine.machin_image.present? %>
                      <%= image_tag machine.machin_image, class: 'w-100' %>
                    <% else %>
                      <%= image_tag("/assets/デフォルト画像/Noimage-0d0fe1307bbfe3fa780c9399bdf4bf0e070098b0bb718e4a35209490896f3b77.png", style: "height: 210px;") %>
                    <% end %>
                  <% end %>
                <% else %>
                  <%= image_tag("/assets/デフォルト画像/Noimage-0d0fe1307bbfe3fa780c9399bdf4bf0e070098b0bb718e4a35209490896f3b77.png", style: "height: 210px;") %>
                <% end %>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card-body p-1 h-100 mt-2 mt-lg-5">
              <% @machines.each do |machine| %>
                <h3 class="card-title bg-body-secondary">マシン名</h3>
                <p class="card-text h5 fw-bold"><%= machine.machin_name%></p>
                <h3 class="card-title bg-body-secondary mt-lg-3">マシン重量</h3>
                <p class="card-text"><small class="text-body-secondary h5 fw-bold"><%= machine.machin_weight%></small></p>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container col-12 col-md-11">
      <div class="row row-col-12 row-col-md-2 g-4 d-flex justify-content-center">
        <div class="col-10 col-md">
          <div class="card">
            <% if @parts.present? %>
              <% @parts.each do |part| %>
                <%= image_tag(part.motor_image, class: 'w-100') %>
              <% end %>
            <% else %>
              <%= image_tag("/assets/デフォルト画像/Noimage-0d0fe1307bbfe3fa780c9399bdf4bf0e070098b0bb718e4a35209490896f3b77.png", style: "height: 210px;") %>
            <% end %>
          </div>
          <div class="card-body mt-3">
            <p class="h5 fw-bold">【モーター】</p>
          </div>
        </div>
        <div class="col-10 col-md">
          <div class="card">
            <% if @parts.present? %>
              <% @parts.each do |part| %>
                <%= image_tag(part.chassi_image, class: 'w-100') %>
              <% end %>
            <% else %>
              <%= image_tag("/assets/デフォルト画像/Noimage-0d0fe1307bbfe3fa780c9399bdf4bf0e070098b0bb718e4a35209490896f3b77.png", style: "height: 210px;") %>
            <% end %>
          </div>
          <div class="card-body mt-3">
            <p class="h5 fw-bold">【シャーシ】</p>
          </div>
        </div>
      </div>
    </div>
    <% if current_user.machines.empty? %>
      <div class="row col">
        <div class="container shadow-lg p-3 bg-primary-subtle rounded mt-3 mb-3">
            <p class="h3 fw-bold mt-3 mb-3">マシン情報 新規登録</p>
            <%= form_with(model: @machine) do |f| %>
              <div class="mb-3 col-12 text-start">
                <p class="h5 fw-bold">マシン画像</p>
                <%= f.file_field :machin_image, class: "form-size d-grid col-12" %>
              </div>
              <div class="mb-3 col-12 text-start">
                <%= f.label :machin_name, "マシン名", class: "form-label Form__label--required fw-bold fs-5" %>
                <%= f.text_field :machin_name, class: "form-size d-grid col-12", placeholder: "マシン名を入力" %>
              </div>
              <div class="mb-3 col-12 text-start">
                <%= f.label :machin_weight, "マシン重量", class: "form-label Form__label--required fw-bold fs-5" %>
                <%= f.text_field :machin_weight, class: "form-size d-grid col-12 mb-5", placeholder: "マシン重量を入力"%>
              </div>
              <%= f.hidden_field :user_id,value: @user.id %>
              <div>
                <%= f.submit "登録完了", class: "btn btn-primary mb-3" %>
              </div>
            <% end %>
        </div>
      </div>
    <% end %>
    <% if current_user.parts.empty? %>
      <div class="row col">
        <div class="container shadow-lg p-3 bg-primary-subtle rounded mt-3 mb-3">
          <p class="h3 fw-bold mt-3 mb-3">パーツ情報 新規登録</p>
          <%= form_with(model: @part, multipart: true) do |f| %>
            <div class="mb-3 col-12 text-start">
              <%= f.label :motor_name, "モーター", class: "form-label fw-bold fs-5" %>
              <%= f.select :motor_name, options_for_select(@text_options), {}, class: "form-select form-size d-grid col-12" %>
            </div>
            <div class="mb-3 col-12 text-start">
              <%= f.label :chassi_name, "シャーシ", class: "form-label fw-bold fs-5" %>
              <%= f.select :chassi_name, options_for_select(@text_options2), {}, class: "form-select form-size d-grid col-12 mb-5" %>
            </div>
            <%= f.hidden_field :user_id,value: @user.id %>
            <div>
              <%= f.submit "登録完了", class: "btn btn-primary mb-3" %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
    <% if current_user.machines.any? %>
      <%= link_to "マシン情報 編集", edit_machine_path(current_user.machines.first.id), class: "col-8 col-md-5  btn btn-primary mx-3 mb-3 mt-5" %>
    <% end %>
    <% if current_user.parts.any? %>
      <%= link_to "パーツ情報 編集", edit_part_path(current_user.parts.first.id), class: "col-8 col-md-5  btn btn-primary mx-3 mb-3 mt-5" %>
    <% end %>
    <div class="row mt-4">
      <p class="h3 fw-bold">ラップタイム一覧</p>
      <table>
        <thead>
          <tr>
            <th><span p class="th_size">店舗名</span></th>
            <th><span p class="th_size">タイム</span></th>
            <th><span p class="th_size">削除</span></th>
          </tr>
        </thead>
        <tbody>
          <% if @lap_time_to_races.present? %>
            <% @lap_time_to_races.each do |lap| %>
              <tr>
                <td><%= link_to lap.shop_name, shop_path(lap.shop_id) %></td>
                <td><%= lap.lap_time %></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="container">
      <div class="row col">
        <p class="h3 fw-bold mt-5 mb-4">ラップタイム 新規登録</p>
        <%= form_with model: @lap_time_to_race do |f| %>
          <div class="mb-3 col-12 text-start">
            <%= f.label :shop_name, "タイムを測ったお店", class: "form-label fw-bold fs-5" %>
            <%= f.select :shop_name, options_for_select(@text_options3), {}, class: "form-select form-size d-grid col-12" %>
          </div>
          <div class="mb-3 col-12 text-start">
            <%= f.label :lap_time, "ラップタイム", class: "form-label Form__label--required fw-bold fs-5" %>
            <%= f.text_field :lap_time, class: "form-size d-grid col-12 mb-5", placeholder: "ラップタイムを入力"%>
          </div>
          <%= f.hidden_field :user_id,value: @user.id %>
          <div>
            <%= f.submit "新規登録", class: "btn btn-primary mb-5" %>
          </div>
        <% end %>
      </div>
      <%= link_to "プロフィール編集", edit_user_path(current_user), class: "col-8 col-md-5 btn btn-primary mb-3" %>
    </div>
  </div>
</div>
